
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>中醫診所系統</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
<script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database.js"></script>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBx6RQt7wA2DDnxkQiIfh8ubzpzKYfXWGg",
        authDomain: "clinic-bb064.firebaseapp.com",
        databaseURL: "https://clinic-bb064-default-rtdb.firebaseio.com",
        projectId: "clinic-bb064",
        storageBucket: "clinic-bb064.firebasestorage.app",
        messagingSenderId: "387800418575",
        appId: "1:387800418575:web:4dc6baafbedf640ac1567a",
        measurementId: "G-1KW4XQX10N"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const rdb = firebase.database();

    // Function to save patient data to Firestore
    function savePatientData(patient) {
        db.collection("patients").add({
            name: patient.name,
            age: patient.age,
            gender: patient.gender,
            phone: patient.phone,
            birthDate: patient.birthDate,
            address: patient.address,
            allergies: patient.allergies,
            history: patient.history,
            createdAt: new Date().toISOString()
        })
        .then((docRef) => {
            console.log("Document written with ID: ", docRef.id);
        })
        .catch((error) => {
            console.error("Error adding document: ", error);
        });
    }

    // Function to update appointment status in Realtime Database
    function updateAppointmentStatus(appointmentId, status) {
        rdb.ref('appointments/' + appointmentId).set({
            status: status,
            lastUpdated: new Date().toISOString()
        });
    }

    // Example usage: saving a patient and updating an appointment
    savePatientData({
        name: "John Doe",
        age: 30,
        gender: "Male",
        phone: "1234567890",
        birthDate: "1990-01-01",
        address: "123 Clinic St",
        allergies: "None",
        history: "Healthy"
    });

    updateAppointmentStatus("appt12345", "Completed");
</script>

</head>
<body>
    <div class="container mx-auto p-6">
        <h1 class="text-2xl font-semibold text-center mb-8">中醫診所管理系統</h1>
        <button onclick="savePatientData({ name: 'Test Patient', age: 40, gender: 'Female', phone: '0987654321', birthDate: '1980-05-15', address: '456 Test Ave', allergies: 'Peanuts', history: 'Diabetic' })" class="bg-blue-500 text-white p-3 rounded-lg">
            保存病人資料
        </button>
        <button onclick="updateAppointmentStatus('appt12345', 'In Progress')" class="bg-green-500 text-white p-3 rounded-lg mt-4">
            更新掛號狀態
        </button>
    </div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">&lt;!DOCTYPE html&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">&lt;html lang="zh-TW"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">&lt;head&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">    </span>&lt;title&gt;中醫處方推薦工具&lt;/title&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">    </span>&lt;style&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;600;700&amp;display=swap');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>body { font-family: 'Noto Sans TC', sans-serif; }</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">&lt;/head&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">&lt;body class="bg-gradient-to-br from-green-50 to-blue-50 min-h-screen"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div class="container mx-auto px-4 py-6 max-w-5xl"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- 標題 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="text-center mb-6"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;h1 class="text-3xl font-bold text-gray-800 mb-2"&gt;🌿 中醫處方工具&lt;/h1&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- 數據備份區 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="bg-white rounded-lg shadow-md p-4 mb-4"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="grid md:grid-cols-2 gap-4"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;!-- 本地備份 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="space-y-2"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;h3 class="text-sm font-bold text-gray-700 mb-2"&gt;📱 本地備份&lt;/h3&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex flex-wrap gap-2"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button onclick="exportData()"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg font-medium text-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>💾 下載備份</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button onclick="document.getElementById('importFile').click()"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>class="bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-lg font-medium text-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>📂 恢復數據</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button onclick="clearAllData()"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>class="bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-lg font-medium text-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>🗑️ 清空數據</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;!-- 雲端同步 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="space-y-2"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;h3 class="text-sm font-bold text-gray-700 mb-2"&gt;☁️ 雲端同步&lt;/h3&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex flex-wrap gap-2"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button onclick="saveToCloud()"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>class="bg-purple-500 hover:bg-purple-600 text-white px-3 py-2 rounded-lg font-medium text-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>☁️ 保存到雲端</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button onclick="loadFromCloud()"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>class="bg-indigo-500 hover:bg-indigo-600 text-white px-3 py-2 rounded-lg font-medium text-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>📥 從雲端載入</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button onclick="showCloudStatus()"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>class="bg-gray-500 hover:bg-gray-600 text-white px-3 py-2 rounded-lg font-medium text-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>📊 同步狀態</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- 批量導入區 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-4 mt-4"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;h3 class="text-sm font-bold text-gray-700 mb-3"&gt;📋 批量導入中藥症狀&lt;/h3&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="space-y-3"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="grid md:grid-cols-2 gap-4"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;label class="block text-sm font-medium text-gray-700 mb-2"&gt;📝 文本導入&lt;/label&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;textarea id="bulkImportText"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                      </span>placeholder="格式：中藥名：症狀1,症狀2,症狀3&amp;#10;例如：&amp;#10;當歸：血虛,月經不調,便秘&amp;#10;黃芪：氣虛,疲勞,自汗&amp;#10;甘草：咳嗽,胃痛,解毒&amp;#10;&amp;#10;💡 支持大量數據導入（建議單次不超過10萬字）"</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                      </span>rows="6"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                      </span>maxlength="100000"</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                      </span>class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm resize-y"&gt;&lt;/textarea&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;label class="block text-sm font-medium text-gray-700 mb-2"&gt;📁 文件導入&lt;/label&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="space-y-2"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;button onclick="document.getElementById('bulkImportFile').click()"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                        </span>class="w-full bg-orange-500 hover:bg-orange-600 text-white px-3 py-2 rounded-lg font-medium text-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                    </span>📁 選擇文件導入</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;button onclick="downloadTemplate()"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                        </span>class="w-full bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg font-medium text-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                    </span>📄 下載模板文件</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex justify-between items-center"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="flex gap-2"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="processBulkImport()"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                    </span>class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium text-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>⚡ 開始導入</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="clearBulkImport()"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                    </span>class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium text-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>🧹 清空輸入</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div id="charCount" class="text-sm text-gray-500"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>字數：0 / 100,000</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;input type="file" id="bulkImportFile" accept=".txt,.csv" style="display: none;" onchange="loadBulkImportFile(event)"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- 狀態顯示 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="backupStatus" class="mt-3 p-3 bg-gray-50 rounded-lg text-sm text-gray-600 hidden"&gt;&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(event)"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- 主搜索區 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="bg-white rounded-lg shadow-md p-6 mb-6"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="space-y-4"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;input type="text" id="symptomSearch" placeholder="輸入症狀搜索處方，例如：頭痛,發熱"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                       </span>class="w-full px-4 py-3 text-lg border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;!-- 快速選擇按鈕 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="flex flex-wrap gap-2" id="quickSelectGroups"&gt;&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button onclick="searchPrescriptions()"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>class="w-full bg-green-500 hover:bg-green-600 text-white text-lg font-medium py-3 rounded-lg"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>🔍 搜索處方</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- 搜索結果 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="searchResults" class="mt-6 hidden"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;h3 class="text-xl font-bold text-gray-800 mb-4"&gt;推薦處方&lt;/h3&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div id="resultsList" class="space-y-4"&gt;&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- 標籤頁導航 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="bg-white rounded-lg shadow-md mb-6"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="flex border-b"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button onclick="showTab('groups')" id="groupsTab"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>class="flex-1 py-3 px-4 text-center font-medium border-b-2 border-green-500 text-green-600"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>症狀分組</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button onclick="showTab('symptoms')" id="symptomsTab"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>class="flex-1 py-3 px-4 text-center font-medium text-gray-500 hover:text-gray-700"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>症狀管理</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button onclick="showTab('prescriptions')" id="prescriptionsTab"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>class="flex-1 py-3 px-4 text-center font-medium text-gray-500 hover:text-gray-700"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>處方管理</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- 症狀分組標籤頁 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="groupsContent" class="p-6"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="grid md:grid-cols-2 gap-6"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;!-- 創建分組 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h3 class="text-lg font-bold mb-4"&gt;創建新分組&lt;/h3&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="space-y-3"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;input type="text" id="newGroupName" placeholder="分組名稱"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                   </span>class="w-full px-3 py-2 border border-gray-300 rounded-lg"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;input type="text" id="newGroupSymptoms" placeholder="症狀（用逗號分隔）"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                   </span>class="w-full px-3 py-2 border border-gray-300 rounded-lg"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;select id="groupColor" class="w-full px-3 py-2 border border-gray-300 rounded-lg"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;option value="red"&gt;🔴 紅色&lt;/option&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;option value="blue"&gt;🔵 藍色&lt;/option&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;option value="green"&gt;🟢 綠色&lt;/option&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;option value="orange"&gt;🟠 橙色&lt;/option&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;option value="purple"&gt;🟣 紫色&lt;/option&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;option value="pink"&gt;🩷 粉色&lt;/option&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/select&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="addSymptomGroup()"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                    </span>class="w-full bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>➕ 創建分組</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;!-- 現有分組 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h3 class="text-lg font-bold mb-4"&gt;現有分組&lt;/h3&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div id="symptomGroupsList" class="space-y-3 max-h-80 overflow-y-auto"&gt;&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- 症狀管理標籤頁 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="symptomsContent" class="p-6 hidden"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="grid md:grid-cols-2 gap-6"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h3 class="text-lg font-bold mb-4"&gt;添加症狀&lt;/h3&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="flex gap-2"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;input type="text" id="newSymptom" placeholder="輸入新症狀"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                   </span>class="flex-1 px-3 py-2 border border-gray-300 rounded-lg"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="addSymptom()"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                    </span>class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>➕ 添加</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h3 class="text-lg font-bold mb-4"&gt;所有症狀 (&lt;span id="symptomCount"&gt;0&lt;/span&gt;)&lt;/h3&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div id="symptomsList" class="max-h-80 overflow-y-auto space-y-2"&gt;&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- 處方管理標籤頁 --&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="prescriptionsContent" class="p-6 hidden"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="grid md:grid-cols-2 gap-6"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h3 class="text-lg font-bold mb-4"&gt;添加處方&lt;/h3&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="space-y-3"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;input type="text" id="prescriptionName" placeholder="處方名稱"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                   </span>class="w-full px-3 py-2 border border-gray-300 rounded-lg"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;textarea id="prescriptionIngredients" placeholder="藥材組成（每行一味藥）" rows="4"</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                      </span>class="w-full px-3 py-2 border border-gray-300 rounded-lg"&gt;&lt;/textarea&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;input type="text" id="prescriptionSymptoms" placeholder="適用症狀（用逗號分隔）"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                   </span>class="w-full px-3 py-2 border border-gray-300 rounded-lg"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button onclick="addPrescription()"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                    </span>class="w-full bg-purple-500 hover:bg-purple-600 text-white py-2 rounded-lg"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>➕ 添加處方</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h3 class="text-lg font-bold mb-4"&gt;現有處方 (&lt;span id="prescriptionCount"&gt;0&lt;/span&gt;)&lt;/h3&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div id="prescriptionsList" class="max-h-80 overflow-y-auto space-y-3"&gt;&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 數據存儲</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>let symptoms = JSON.parse(localStorage.getItem('tcm_symptoms') || '[]');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>let symptomGroups = JSON.parse(localStorage.getItem('tcm_symptom_groups') || '[]');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>let prescriptions = JSON.parse(localStorage.getItem('tcm_prescriptions') || '[]');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 初始化示例數據</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>if (symptoms.length === 0) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>symptoms = ['頭痛', '發熱', '咳嗽', '腹痛', '失眠', '疲勞', '食慾不振', '噁心', '偏頭痛', '頭暈', '高熱', '低熱', '乾咳', '濕咳', '胃痛', '腹脹'];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('tcm_symptoms', JSON.stringify(symptoms));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>if (symptomGroups.length === 0) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>symptomGroups = [</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>{</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>name: '頭部症狀',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>symptoms: ['頭痛', '偏頭痛', '頭暈'],</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>color: 'red'</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>},</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>{</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>name: '發熱症狀',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>symptoms: ['發熱', '高熱', '低熱'],</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>color: 'orange'</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>},</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>{</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>name: '咳嗽症狀',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>symptoms: ['咳嗽', '乾咳', '濕咳'],</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>color: 'blue'</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>},</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>{</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>name: '腸胃症狀',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>symptoms: ['腹痛', '胃痛', '腹脹', '食慾不振', '噁心'],</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>color: 'green'</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('tcm_symptom_groups', JSON.stringify(symptomGroups));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>if (prescriptions.length === 0) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>prescriptions = [</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>{</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>name: '銀翹散',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>ingredients: '金銀花 15g\n連翹 15g\n薄荷 6g\n牛蒡子 9g\n桔梗 6g\n甘草 5g',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>symptoms: ['發熱', '咳嗽', '頭痛']</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>},</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>{</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>name: '逍遙散',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>ingredients: '柴胡 6g\n當歸 9g\n白芍 9g\n白朮 9g\n茯苓 9g\n甘草 3g',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>symptoms: ['腹痛', '疲勞', '失眠']</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>},</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>{</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>name: '平胃散',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>ingredients: '蒼朮 12g\n厚朴 9g\n陳皮 6g\n甘草 3g',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>symptoms: ['腹痛', '食慾不振', '噁心']</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('tcm_prescriptions', JSON.stringify(prescriptions));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 更新統計</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function updateStats() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('symptomCount').textContent = symptoms.length;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('prescriptionCount').textContent = prescriptions.length;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 渲染症狀分組</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function renderSymptomGroups() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const container = document.getElementById('symptomGroupsList');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const colorMap = {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>red: 'bg-red-100 text-red-800 border-red-300',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>blue: 'bg-blue-100 text-blue-800 border-blue-300',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>green: 'bg-green-100 text-green-800 border-green-300',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>orange: 'bg-orange-100 text-orange-800 border-orange-300',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>purple: 'bg-purple-100 text-purple-800 border-purple-300',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>pink: 'bg-pink-100 text-pink-800 border-pink-300'</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>};</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>container.innerHTML = symptomGroups.map((group, index) =&gt; `</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="border-2 rounded-lg p-4 ${colorMap[group.color] || 'bg-gray-100 text-gray-800 border-gray-300'}"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex items-center justify-between mb-2"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h4 class="font-bold text-lg"&gt;${group.name}&lt;/h4&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button onclick="removeSymptomGroup(${index})"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>❌ 刪除</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="text-sm font-medium"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>${group.symptoms.join('、')}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>`).join('');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>// 更新快速選擇按鈕</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>renderQuickSelectGroups();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 渲染快速選擇分組按鈕</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function renderQuickSelectGroups() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const container = document.getElementById('quickSelectGroups');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const colorMap = {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>red: 'bg-red-200 hover:bg-red-300 text-red-900',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>blue: 'bg-blue-200 hover:bg-blue-300 text-blue-900',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>green: 'bg-green-200 hover:bg-green-300 text-green-900',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>orange: 'bg-orange-200 hover:bg-orange-300 text-orange-900',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>purple: 'bg-purple-200 hover:bg-purple-300 text-purple-900',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>pink: 'bg-pink-200 hover:bg-pink-300 text-pink-900'</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>};</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>container.innerHTML = symptomGroups.map(group =&gt; `</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button onclick="selectSymptomGroup('${group.name}')"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>class="px-4 py-2 rounded-lg font-medium transition duration-200 ${colorMap[group.color] || 'bg-gray-200 hover:bg-gray-300 text-gray-900'}"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>${group.name}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>`).join('');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 渲染症狀列表</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function renderSymptoms() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const container = document.getElementById('symptomsList');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>container.innerHTML = symptoms.map((symptom, index) =&gt; `</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="flex items-center justify-between bg-gray-100 px-4 py-3 rounded-lg"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;span class="text-gray-800 font-medium"&gt;${symptom}&lt;/span&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button onclick="removeSymptom(${index})"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>❌</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>`).join('');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 渲染處方列表</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function renderPrescriptions() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const container = document.getElementById('prescriptionsList');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>container.innerHTML = prescriptions.map((prescription, index) =&gt; `</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="bg-purple-50 border border-purple-200 p-4 rounded-lg"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex items-center justify-between mb-3"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h4 class="font-bold text-lg text-gray-800"&gt;${prescription.name}&lt;/h4&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button onclick="removePrescription(${index})"<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>❌ 刪除</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="mb-3"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="font-medium text-gray-700 mb-1"&gt;💊 藥材：&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="text-gray-600 bg-white p-2 rounded border text-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>${prescription.ingredients.replace(/\n/g, '&lt;br&gt;')}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="font-medium text-gray-700 mb-1"&gt;🎯 適用症狀：&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="text-gray-600"&gt;${prescription.symptoms.join('、')}&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>`).join('');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 添加症狀分組</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function addSymptomGroup() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const name = document.getElementById('newGroupName').value.trim();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const symptomsInput = document.getElementById('newGroupSymptoms').value.trim();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const color = document.getElementById('groupColor').value;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (name &amp;&amp; symptomsInput) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const groupSymptoms = symptomsInput.split(',').map(s =&gt; s.trim()).filter(s =&gt; s);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>// 將分組中的症狀添加到總症狀列表中</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>groupSymptoms.forEach(symptom =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>if (!symptoms.includes(symptom)) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>symptoms.push(symptom);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>symptomGroups.push({</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>name: name,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>symptoms: groupSymptoms,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>color: color</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>localStorage.setItem('tcm_symptoms', JSON.stringify(symptoms));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>localStorage.setItem('tcm_symptom_groups', JSON.stringify(symptomGroups));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>// 清空輸入框</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('newGroupName').value = '';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('newGroupSymptoms').value = '';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>renderSymptomGroups();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>renderSymptoms();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>updateStats();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>enhancedAutoBackup();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 刪除症狀分組</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function removeSymptomGroup(index) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>symptomGroups.splice(index, 1);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('tcm_symptom_groups', JSON.stringify(symptomGroups));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>renderSymptomGroups();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>autoBackup();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 選擇症狀分組（快速添加到搜索框）</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function selectSymptomGroup(groupName) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const searchInput = document.getElementById('symptomSearch');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const currentValue = searchInput.value.trim();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (currentValue) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>searchInput.value = currentValue + ',' + groupName;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>} else {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>searchInput.value = groupName;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 添加症狀</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function addSymptom() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const input = document.getElementById('newSymptom');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const symptom = input.value.trim();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (symptom &amp;&amp; !symptoms.includes(symptom)) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>symptoms.push(symptom);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>localStorage.setItem('tcm_symptoms', JSON.stringify(symptoms));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>input.value = '';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>renderSymptoms();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>updateStats();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>enhancedAutoBackup();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 刪除症狀</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function removeSymptom(index) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>symptoms.splice(index, 1);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('tcm_symptoms', JSON.stringify(symptoms));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>renderSymptoms();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>updateStats();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>autoBackup();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 添加處方</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function addPrescription() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const name = document.getElementById('prescriptionName').value.trim();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const ingredients = document.getElementById('prescriptionIngredients').value.trim();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const symptomsInput = document.getElementById('prescriptionSymptoms').value.trim();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (name &amp;&amp; ingredients &amp;&amp; symptomsInput) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const prescriptionSymptoms = symptomsInput.split(',').map(s =&gt; s.trim()).filter(s =&gt; s);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>prescriptions.push({</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>name: name,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>ingredients: ingredients,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>symptoms: prescriptionSymptoms</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>localStorage.setItem('tcm_prescriptions', JSON.stringify(prescriptions));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>// 清空輸入框</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('prescriptionName').value = '';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('prescriptionIngredients').value = '';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('prescriptionSymptoms').value = '';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>renderPrescriptions();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>updateStats();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>enhancedAutoBackup();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 刪除處方</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function removePrescription(index) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>prescriptions.splice(index, 1);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('tcm_prescriptions', JSON.stringify(prescriptions));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>renderPrescriptions();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>updateStats();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>autoBackup();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 搜索處方</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function searchPrescriptions() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const searchInput = document.getElementById('symptomSearch').value.trim();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (!searchInput) return;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const searchTerms = searchInput.split(',').map(s =&gt; s.trim()).filter(s =&gt; s);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>let allSearchSymptoms = [];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>// 處理搜索詞，包括症狀分組</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>searchTerms.forEach(term =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const termLower = term.toLowerCase();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>// 檢查是否為症狀分組</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const matchingGroup = symptomGroups.find(group =&gt;<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>group.name.toLowerCase() === termLower</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>if (matchingGroup) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>// 如果是分組，添加分組中的所有症狀</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>allSearchSymptoms.push(...matchingGroup.symptoms.map(s =&gt; s.toLowerCase()));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>} else {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>// 如果不是分組，直接添加症狀</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>allSearchSymptoms.push(termLower);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>// 去重</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>allSearchSymptoms = [...new Set(allSearchSymptoms)];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const results = [];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>prescriptions.forEach(prescription =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const matchCount = prescription.symptoms.filter(symptom =&gt;<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>allSearchSymptoms.some(searchSymptom =&gt;<span class="Apple-converted-space"> </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>symptom.toLowerCase().includes(searchSymptom)</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>)</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>).length;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>if (matchCount &gt; 0) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>results.push({</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>...prescription,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>matchCount: matchCount,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>matchPercentage: (matchCount / allSearchSymptoms.length * 100).toFixed(0)</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>// 按匹配度排序</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>results.sort((a, b) =&gt; b.matchCount - a.matchCount);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>// 顯示結果</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const resultsContainer = document.getElementById('searchResults');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const resultsList = document.getElementById('resultsList');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (results.length &gt; 0) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>resultsList.innerHTML = results.map(result =&gt; `</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="bg-green-50 border border-green-200 rounded-lg p-4"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="flex items-center justify-between mb-3"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;h4 class="text-xl font-bold text-gray-800"&gt;${result.name}&lt;/h4&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span class="bg-green-500 text-white text-sm px-3 py-1 rounded-full"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>${result.matchPercentage}% 匹配</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/span&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="mb-3"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="text-gray-700 font-medium mb-1"&gt;💊 藥材組成：&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="text-gray-600 bg-white p-3 rounded border"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>${result.ingredients.replace(/\n/g, '&lt;br&gt;')}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="text-gray-700 font-medium mb-1"&gt;🎯 適用症狀：&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="text-gray-600"&gt;${result.symptoms.join('、')}&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>`).join('');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>resultsContainer.classList.remove('hidden');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>} else {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>resultsList.innerHTML = '&lt;div class="text-gray-500 text-center py-8 text-lg"&gt;😔 未找到相關處方&lt;/div&gt;';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>resultsContainer.classList.remove('hidden');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 回車搜索</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById('symptomSearch').addEventListener('keypress', function(e) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (e.key === 'Enter') {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>searchPrescriptions();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 回車添加</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById('newSymptom').addEventListener('keypress', function(e) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (e.key === 'Enter') {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>addSymptom();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 標籤頁切換功能</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function showTab(tabName) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>// 隱藏所有內容</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('groupsContent').classList.add('hidden');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('symptomsContent').classList.add('hidden');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('prescriptionsContent').classList.add('hidden');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>// 重置所有標籤樣式</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('groupsTab').className = 'flex-1 py-3 px-4 text-center font-medium text-gray-500 hover:text-gray-700';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('symptomsTab').className = 'flex-1 py-3 px-4 text-center font-medium text-gray-500 hover:text-gray-700';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('prescriptionsTab').className = 'flex-1 py-3 px-4 text-center font-medium text-gray-500 hover:text-gray-700';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>// 顯示選中的內容和標籤</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(tabName + 'Content').classList.remove('hidden');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById(tabName + 'Tab').className = 'flex-1 py-3 px-4 text-center font-medium border-b-2 border-green-500 text-green-600';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 數據備份和恢復功能</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function exportData() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const data = {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>symptoms: symptoms,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>symptomGroups: symptomGroups,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>prescriptions: prescriptions,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>exportDate: new Date().toISOString(),</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>version: '1.0'</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>};</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const dataStr = JSON.stringify(data, null, 2);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const dataBlob = new Blob([dataStr], {type: 'application/json'});</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const link = document.createElement('a');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>link.href = URL.createObjectURL(dataBlob);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>link.download = `中醫處方數據_${new Date().toISOString().split('T')[0]}.json`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>link.click();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>alert('✅ 數據已成功備份到下載文件夾！');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function importData(event) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const file = event.target.files[0];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (!file) return;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const reader = new FileReader();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>reader.onload = function(e) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>try {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>const data = JSON.parse(e.target.result);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>// 驗證數據格式</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>if (data.symptoms &amp;&amp; data.symptomGroups &amp;&amp; data.prescriptions) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>symptoms = data.symptoms;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>symptomGroups = data.symptomGroups;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>prescriptions = data.prescriptions;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>// 保存到本地存儲</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>localStorage.setItem('tcm_symptoms', JSON.stringify(symptoms));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>localStorage.setItem('tcm_symptom_groups', JSON.stringify(symptomGroups));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>localStorage.setItem('tcm_prescriptions', JSON.stringify(prescriptions));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>// 重新渲染界面</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>renderSymptomGroups();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>renderSymptoms();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>renderPrescriptions();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>updateStats();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>alert('✅ 數據恢復成功！');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>} else {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>alert('❌ 文件格式不正確，請選擇正確的備份文件！');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>} catch (error) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>alert('❌ 文件讀取失敗，請檢查文件是否損壞！');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>};</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>reader.readAsText(file);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>// 清空文件選擇器</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>event.target.value = '';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function clearAllData() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (confirm('⚠️ 確定要清空所有數據嗎？此操作無法撤銷！\n\n建議先備份數據再進行清空操作。')) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>localStorage.removeItem('tcm_symptoms');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>localStorage.removeItem('tcm_symptom_groups');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>localStorage.removeItem('tcm_prescriptions');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>symptoms = [];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>symptomGroups = [];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>prescriptions = [];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>renderSymptomGroups();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>renderSymptoms();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>renderPrescriptions();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>updateStats();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>// 隱藏搜索結果</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('searchResults').classList.add('hidden');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('symptomSearch').value = '';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>alert('✅ 所有數據已清空！');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 自動備份功能（每次數據變更時）</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function autoBackup() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const data = {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>symptoms: symptoms,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>symptomGroups: symptomGroups,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>prescriptions: prescriptions,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>lastBackup: new Date().toISOString()</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>};</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('tcm_auto_backup', JSON.stringify(data));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 檢查並恢復自動備份</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function checkAutoBackup() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const backup = localStorage.getItem('tcm_auto_backup');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (backup) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>try {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>const data = JSON.parse(backup);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>const backupDate = new Date(data.lastBackup);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>const now = new Date();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>const daysDiff = (now - backupDate) / (1000 * 60 * 60 * 24);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>// 如果備份超過7天，提醒用戶</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>if (daysDiff &gt; 7) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>if (confirm('💡 檢測到您的數據已經超過7天未備份，建議立即備份數據以防丟失。\n\n是否現在備份？')) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>exportData();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>} catch (error) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>console.log('自動備份檢查失敗');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 雲端存儲功能（使用瀏覽器的IndexedDB作為持久化存儲）</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>let db;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 初始化IndexedDB</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function initDB() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>return new Promise((resolve, reject) =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const request = indexedDB.open('TCMDatabase', 1);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>request.onerror = () =&gt; reject(request.error);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>request.onsuccess = () =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>db = request.result;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>resolve(db);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>};</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>request.onupgradeneeded = (event) =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>db = event.target.result;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>if (!db.objectStoreNames.contains('backups')) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>const store = db.createObjectStore('backups', { keyPath: 'id' });</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>store.createIndex('timestamp', 'timestamp', { unique: false });</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>};</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 保存到雲端（實際是IndexedDB持久化存儲）</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>async function saveToCloud() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>try {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>showStatus('正在保存到雲端...', 'info');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>if (!db) await initDB();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const data = {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>id: 'main_backup',</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>symptoms: symptoms,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>symptomGroups: symptomGroups,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>prescriptions: prescriptions,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>timestamp: new Date().toISOString(),</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>version: '1.0'</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>};</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const transaction = db.transaction(['backups'], 'readwrite');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const store = transaction.objectStore('backups');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>await store.put(data);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>// 同時創建一個帶時間戳的歷史備份</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const historyData = {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>...data,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>id: `backup_${Date.now()}`</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>};</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>await store.put(historyData);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>showStatus('✅ 數據已成功保存到雲端！', 'success');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>// 自動清理超過30天的歷史備份</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>cleanOldBackups();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>} catch (error) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>showStatus('❌ 雲端保存失敗：' + error.message, 'error');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 從雲端載入</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>async function loadFromCloud() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>try {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>showStatus('正在從雲端載入...', 'info');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>if (!db) await initDB();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const transaction = db.transaction(['backups'], 'readonly');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const store = transaction.objectStore('backups');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const request = store.get('main_backup');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>request.onsuccess = () =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>const data = request.result;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>if (data) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>symptoms = data.symptoms || [];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>symptomGroups = data.symptomGroups || [];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>prescriptions = data.prescriptions || [];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>// 保存到本地存儲</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>localStorage.setItem('tcm_symptoms', JSON.stringify(symptoms));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>localStorage.setItem('tcm_symptom_groups', JSON.stringify(symptomGroups));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>localStorage.setItem('tcm_prescriptions', JSON.stringify(prescriptions));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>// 重新渲染界面</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>renderSymptomGroups();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>renderSymptoms();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>renderPrescriptions();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>updateStats();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>showStatus('✅ 數據已從雲端成功載入！', 'success');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>} else {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>showStatus('⚠️ 雲端沒有找到備份數據', 'warning');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>};</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>request.onerror = () =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>showStatus('❌ 雲端載入失敗：' + request.error, 'error');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>};</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>} catch (error) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>showStatus('❌ 雲端載入失敗：' + error.message, 'error');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 顯示雲端狀態</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>async function showCloudStatus() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>try {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>if (!db) await initDB();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const transaction = db.transaction(['backups'], 'readonly');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const store = transaction.objectStore('backups');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>// 獲取主備份</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const mainRequest = store.get('main_backup');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>// 獲取所有歷史備份</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const allRequest = store.getAll();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>Promise.all([</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>new Promise(resolve =&gt; { mainRequest.onsuccess = () =&gt; resolve(mainRequest.result); }),</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>new Promise(resolve =&gt; { allRequest.onsuccess = () =&gt; resolve(allRequest.result); })</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>]).then(([mainBackup, allBackups]) =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>let statusText = '';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>if (mainBackup) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>const lastSync = new Date(mainBackup.timestamp);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>statusText += `📅 最後同步：${lastSync.toLocaleString('zh-TW')}\n`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>statusText += `📊 症狀數量：${mainBackup.symptoms?.length || 0}\n`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>statusText += `📋 分組數量：${mainBackup.symptomGroups?.length || 0}\n`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>statusText += `💊 處方數量：${mainBackup.prescriptions?.length || 0}\n`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>} else {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>statusText += '⚠️ 尚未進行雲端備份\n';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>const historyBackups = allBackups.filter(b =&gt; b.id !== 'main_backup');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>statusText += `🗂️ 歷史備份：${historyBackups.length} 個\n`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>// 計算存儲使用情況</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>const dataSize = JSON.stringify(allBackups).length;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>statusText += `💾 存儲使用：${(dataSize / 1024).toFixed(1)} KB`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>showStatus(statusText, 'info', 8000);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>} catch (error) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>showStatus('❌ 無法獲取雲端狀態：' + error.message, 'error');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 清理舊備份</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>async function cleanOldBackups() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>try {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>if (!db) return;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const transaction = db.transaction(['backups'], 'readwrite');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const store = transaction.objectStore('backups');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const index = store.index('timestamp');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const thirtyDaysAgo = new Date();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const range = IDBKeyRange.upperBound(thirtyDaysAgo.toISOString());</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const request = index.openCursor(range);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>request.onsuccess = (event) =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>const cursor = event.target.result;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>if (cursor) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>if (cursor.value.id !== 'main_backup') {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>cursor.delete();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>cursor.continue();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>};</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>} catch (error) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>console.log('清理舊備份失敗：', error);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 顯示狀態信息</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function showStatus(message, type = 'info', duration = 3000) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const statusDiv = document.getElementById('backupStatus');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>statusDiv.classList.remove('hidden', 'bg-blue-50', 'bg-green-50', 'bg-red-50', 'bg-yellow-50');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>statusDiv.classList.remove('text-blue-600', 'text-green-600', 'text-red-600', 'text-yellow-600');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>switch (type) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>case 'success':</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>statusDiv.classList.add('bg-green-50', 'text-green-600');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>break;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>case 'error':</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>statusDiv.classList.add('bg-red-50', 'text-red-600');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>break;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>case 'warning':</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>statusDiv.classList.add('bg-yellow-50', 'text-yellow-600');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>break;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>default:</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>statusDiv.classList.add('bg-blue-50', 'text-blue-600');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>statusDiv.innerHTML = message.replace(/\n/g, '&lt;br&gt;');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (duration &gt; 0) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>setTimeout(() =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>statusDiv.classList.add('hidden');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>}, duration);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 增強的自動備份（同時備份到雲端）</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>async function enhancedAutoBackup() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>autoBackup(); // 本地備份</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>// 每10次操作自動雲端備份一次</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const operationCount = parseInt(localStorage.getItem('tcm_operation_count') || '0') + 1;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>localStorage.setItem('tcm_operation_count', operationCount.toString());</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (operationCount % 10 === 0) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>try {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>await saveToCloud();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>} catch (error) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>console.log('自動雲端備份失敗：', error);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 初始化頁面</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>async function initApp() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>await initDB();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>renderSymptomGroups();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>renderSymptoms();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>renderPrescriptions();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>updateStats();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>checkAutoBackup();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 批量導入功能</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function downloadTemplate() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const template = `當歸：血虛,月經不調,便秘</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">黃芪：氣虛,疲勞,自汗</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">甘草：咳嗽,胃痛,解毒</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">人參：氣虛,心悸,失眠</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">白朮：脾虛,腹脹,泄瀉</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">茯苓：水腫,失眠,心悸</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">川芎：頭痛,月經不調,胸痛</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">白芍：腹痛,月經不調,肝鬱</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">熟地黃：血虛,腎虛,頭暈</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">何首烏：血虛,脫髮,便秘`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const blob = new Blob([template], { type: 'text/plain;charset=utf-8' });</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const link = document.createElement('a');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>link.href = URL.createObjectURL(blob);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>link.download = '中藥症狀導入模板.txt';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>link.click();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>showStatus('✅ 模板文件已下載！請按照格式填寫後導入。', 'success');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function loadBulkImportFile(event) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const file = event.target.files[0];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (!file) return;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const reader = new FileReader();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>reader.onload = function(e) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('bulkImportText').value = e.target.result;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>showStatus('✅ 文件內容已載入到文本框！', 'success');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>};</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>reader.readAsText(file, 'UTF-8');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>// 清空文件選擇器</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>event.target.value = '';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function clearBulkImport() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('bulkImportText').value = '';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>updateCharCount();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>showStatus('🧹 輸入框已清空', 'info');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 更新字數統計</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function updateCharCount() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const textarea = document.getElementById('bulkImportText');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const charCountDiv = document.getElementById('charCount');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const currentLength = textarea.value.length;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const maxLength = 100000;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>charCountDiv.textContent = `字數：${currentLength.toLocaleString()} / ${maxLength.toLocaleString()}`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>// 根據字數變化顏色</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (currentLength &gt; maxLength * 0.9) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>charCountDiv.className = 'text-sm text-red-500 font-medium';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>} else if (currentLength &gt; maxLength * 0.7) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>charCountDiv.className = 'text-sm text-yellow-600 font-medium';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>} else {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>charCountDiv.className = 'text-sm text-gray-500';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>function processBulkImport() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const text = document.getElementById('bulkImportText').value.trim();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (!text) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>showStatus('⚠️ 請先輸入或選擇要導入的內容！', 'warning');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>return;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>// 檢查數據大小</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>const textLength = text.length;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>if (textLength &gt; 100000) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>showStatus('❌ 數據過大！請分批導入或減少內容（當前：' + textLength.toLocaleString() + ' 字）', 'error');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>return;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>showStatus('⚡ 正在處理大量數據，請稍候...', 'info');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">            </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>// 使用 setTimeout 避免阻塞 UI</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout(() =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const lines = text.split('\n').filter(line =&gt; line.trim());</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>let successCount = 0;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>let errorCount = 0;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>let newSymptoms = [];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>let newPrescriptions = [];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>let errorMessages = [];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>// 批量處理，每次處理100行</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>const batchSize = 100;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>let currentBatch = 0;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>function processBatch() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>const start = currentBatch * batchSize;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>const end = Math.min(start + batchSize, lines.length);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>const line = lines[i];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>const trimmedLine = line.trim();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>if (!trimmedLine) continue;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>// 支持多種分隔符：冒號、全形冒號</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>const separators = ['：', ':'];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>let separator = null;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>let parts = null;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>for (let sep of separators) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>if (trimmedLine.includes(sep)) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>parts = trimmedLine.split(sep);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>separator = sep;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>break;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>if (!parts || parts.length !== 2) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>errorMessages.push(`第${i + 1}行格式錯誤：${trimmedLine}`);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>errorCount++;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>continue;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>const herbName = parts[0].trim();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>const symptomsText = parts[1].trim();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>if (!herbName || !symptomsText) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>errorMessages.push(`第${i + 1}行內容不完整：${trimmedLine}`);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>errorCount++;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>continue;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>// 解析症狀，支持多種分隔符</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>const symptomSeparators = [',', '，', ';', '；', '、'];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>let herbSymptoms = [symptomsText];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>for (let sep of symptomSeparators) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>if (symptomsText.includes(sep)) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>herbSymptoms = symptomsText.split(sep).map(s =&gt; s.trim()).filter(s =&gt; s);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>break;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>// 添加症狀到總列表</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>herbSymptoms.forEach(symptom =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>if (symptom &amp;&amp; !symptoms.includes(symptom)) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>symptoms.push(symptom);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>newSymptoms.push(symptom);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>// 檢查是否已存在同名處方</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>const existingIndex = prescriptions.findIndex(p =&gt; p.name === herbName);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>if (existingIndex &gt;= 0) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>// 更新現有處方的症狀</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>const existingSymptoms = prescriptions[existingIndex].symptoms;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>const combinedSymptoms = [...new Set([...existingSymptoms, ...herbSymptoms])];</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>prescriptions[existingIndex].symptoms = combinedSymptoms;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>} else {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>// 創建新處方</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>const newPrescription = {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>name: herbName,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>ingredients: `${herbName} 適量\n（請諮詢中醫師確定具體用量）`,</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>symptoms: herbSymptoms</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>};</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>prescriptions.push(newPrescription);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>newPrescriptions.push(herbName);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>successCount++;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>currentBatch++;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>// 更新進度</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>const progress = Math.round((end / lines.length) * 100);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>showStatus(`⚡ 處理進度：${progress}% (${end}/${lines.length})`, 'info');</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>// 如果還有更多批次，繼續處理</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>if (end &lt; lines.length) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>setTimeout(processBatch, 10); // 短暫延遲避免阻塞</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>} else {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>// 處理完成，保存數據並顯示結果</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>finishImport();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>function finishImport() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>// 保存數據</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>localStorage.setItem('tcm_symptoms', JSON.stringify(symptoms));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>localStorage.setItem('tcm_prescriptions', JSON.stringify(prescriptions));</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>// 重新渲染界面</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>renderSymptoms();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>renderPrescriptions();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>updateStats();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>enhancedAutoBackup();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>// 顯示導入結果</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>let resultMessage = `📊 導入完成！\n`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>resultMessage += `✅ 成功處理：${successCount} 條\n`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>resultMessage += `📝 新增症狀：${newSymptoms.length} 個\n`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>resultMessage += `💊 新增/更新處方：${newPrescriptions.length} 個\n`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>if (errorCount &gt; 0) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>resultMessage += `❌ 錯誤：${errorCount} 條\n`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>if (errorMessages.length &gt; 0) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>resultMessage += `\n錯誤詳情：\n${errorMessages.slice(0, 5).join('\n')}`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>if (errorMessages.length &gt; 5) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                                </span>resultMessage += `\n...還有 ${errorMessages.length - 5} 個錯誤`;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                            </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>showStatus(resultMessage, successCount &gt; 0 ? 'success' : 'error', 10000);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                    </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>// 清空輸入框</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>if (successCount &gt; 0) {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>document.getElementById('bulkImportText').value = '';</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                        </span>updateCharCount();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>// 開始處理第一批</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">                </span>processBatch();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">                </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>}, 100); // 延遲100ms開始處理</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>}</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"></span><br></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 啟動應用</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>initApp();</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818; min-height: 20.0px"><span class="s1"><span class="Apple-converted-space">        </span></span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>// 監聽文本框輸入，實時更新字數統計</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById('bulkImportText').addEventListener('input', updateCharCount);</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById('bulkImportText').addEventListener('paste', function() {</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout(updateCharCount, 10); // 延遲一點確保粘貼內容已處理</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">        </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">&lt;script&gt;(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'964a675ae4bb1082',t:'MTc1MzQzMzM2My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&amp;&amp;(document.onreadystatechange=e,c())}}}})();&lt;/script&gt;&lt;/body&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px 'PingFang HK'; color: #181818; -webkit-text-stroke: #181818"><span class="s1">&lt;/html&gt;</span></h1>
</body>
</html>
